<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/><link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="sql – SQL string composition" href="sql.html" /><link rel="prev" title="Connection classes" href="connection.html" />

    <meta name="generator" content="sphinx-3.3.1, furo 2020.12.30.beta24"/>
        <title>Cursor classes - psycopg3 UNRELEASED documentation</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=33d2fc4f3f180ec1ffc6524e273e21d7d58cbe49">
    <link rel="stylesheet" href="_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 1rem;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 1rem;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="_static/psycopg.css" />
    <link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=26485485040e7aaf717c13fd0188a5ad2c2deb60">
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script defer="defer" src="_static/jquery.js"></script>
    <script defer="defer" src="_static/underscore.js"></script>
    <script defer="defer" src="_static/doctools.js"></script>
    <script defer="defer" src="_static/language_data.js"></script>
    <script defer src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<div class="announcement">
  <aside class="announcement-content">
     <a style="text-decoration: none; color: white;"
   href="https://github.com/sponsors/dvarrazzo/">
   <img height="24px" width="24px" src="/img/logo/psycopg-48.png"/>
    Sponsor psycopg3 on GitHub
</a>
 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">psycopg3 UNRELEASED documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/psycopg.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/psycopg.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">psycopg3 UNRELEASED documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="basic/index.html">Getting started with <code class="docutils literal notranslate"><span class="pre">psycopg3</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html">Basic module usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="params.html">Passing parameters to SQL queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="adapt-types.html">Adaptation between Python and PostgreSQL types</a></li>
<li class="toctree-l2"><a class="reference internal" href="transactions.html">Transaction management</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="advanced/index.html">Advanced topics</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="adaptation.html">Data adaptation configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepared.html">Prepared statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="copy.html">Using COPY TO and COPY FROM</a></li>
<li class="toctree-l2"><a class="reference internal" href="async.html">Async operations</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="api/index.html"><code class="docutils literal notranslate"><span class="pre">psycopg3</span></code> API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="connection.html">Connection classes</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Cursor classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql</span></code> – SQL string composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">errors</span></code> – package exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pq.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pq</span></code> – Libpq wrapper module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="from_pg2.html">Differences from <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code></a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="cursor-classes">
<h1>Cursor classes<a class="headerlink" href="#cursor-classes" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code></a> and <a class="reference internal" href="#psycopg3.AsyncCursor" title="psycopg3.AsyncCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code></a> classes are the main objects to send commands
to a PostgreSQL database session. They are normally created by the
connection’s <a class="reference internal" href="connection.html#psycopg3.Connection.cursor" title="psycopg3.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cursor()</span></code></a> method.</p>
<p>A <a class="reference internal" href="connection.html#psycopg3.Connection" title="psycopg3.Connection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code></a> can create several cursors, but only one at time can perform
operations, so they are not the best way to achieve parallelism (you may want
to operate with several connections instead). All the cursors on the same
connection have a view of the same session, so they can see each other’s
uncommitted data.</p>
<div class="section" id="the-cursor-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code> class<a class="headerlink" href="#the-cursor-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.Cursor">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">Cursor</code><a class="headerlink" href="#psycopg3.Cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>This class implements <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/#cursor-objects">DBAPI-compliant interface</a>. It is what the
classic <a class="reference internal" href="connection.html#psycopg3.Connection.cursor" title="psycopg3.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.cursor()</span></code></a> method returns. <a class="reference internal" href="connection.html#psycopg3.AsyncConnection.cursor" title="psycopg3.AsyncConnection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection.cursor()</span></code></a>
will create instead <a class="reference internal" href="#psycopg3.AsyncCursor" title="psycopg3.AsyncCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code></a> objects, which have the same set of
method but expose an <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a> interface and require <code class="docutils literal notranslate"><span class="pre">async</span></code> and
<code class="docutils literal notranslate"><span class="pre">await</span></code> keywords to operate.</p>
<p>Cursors behave as context managers: on block exit they are closed and
further operation will not be possible. Closing a cursor will not
terminate a transaction or a session though.</p>
<dl class="py attribute">
<dt id="psycopg3.Cursor.connection">
<code class="sig-name descname">connection</code><em class="property">: <a class="reference internal" href="connection.html#psycopg3.Connection" title="psycopg3.Connection">Connection</a></em><a class="headerlink" href="#psycopg3.Cursor.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>The connection this cursor is using.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the current cursor and free associated resources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>you can use <a class="reference internal" href="usage.html#usage"><span class="std std-ref">with conn.cursor(): …</span></a>
to close the cursor automatically when the block is exited.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.closed">
<code class="sig-name descname">closed</code><em class="property"> bool</em><a class="headerlink" href="#psycopg3.Cursor.closed" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the cursor is closed.</p>
</dd></dl>
<p class="rubric">Methods to send commands</p>
<dl class="py method">
<dt id="psycopg3.Cursor.execute">
<code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prepare</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span> → <a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor">Cursor</a><a class="headerlink" href="#psycopg3.Cursor.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a query or command to the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg3.sql.Composable" title="psycopg3.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The query to execute.</p></li>
<li><p><strong>params</strong> (<em>Sequence</em><em> or </em><em>Mapping</em>) – The parameters to pass to the query, if any.</p></li>
<li><p><strong>prepare</strong> – Force (<code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code>) or disallow (<code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code>) preparation of
the query. By default (<code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>) prepare automatically. See
<a class="reference internal" href="prepared.html#prepared-statements"><span class="std std-ref">Prepared statements</span></a>.</p></li>
</ul>
</dd>
</dl>
<p>Return the cursor itself, so that it will be possible to chain a fetch
operation after the call.</p>
<p>See <a class="reference internal" href="params.html#query-parameters"><span class="std std-ref">Passing parameters to SQL queries</span></a> for all the details about executing
queries.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.executemany">
<code class="sig-name descname">executemany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span><span class="p">:</span> <span class="n">Query</span></em>, <em class="sig-param"><span class="n">params_seq</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>Args<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the same command with a sequence of input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg3.sql.Composable" title="psycopg3.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The query to execute</p></li>
<li><p><strong>params_seq</strong> (<em>Sequence of Sequences</em><em> or </em><em>Mappings</em>) – The parameters to pass to the query</p></li>
</ul>
</dd>
</dl>
<p>This is more efficient than performing separate queries, but in case of
several <code class="sql docutils literal notranslate"><span class="pre">INSERT</span></code> (and with some SQL creativity for massive
<code class="sql docutils literal notranslate"><span class="pre">UPDATE</span></code> too) you may consider using <a class="reference internal" href="#psycopg3.Cursor.copy" title="psycopg3.Cursor.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy()</span></code></a>.</p>
<p>See <a class="reference internal" href="params.html#query-parameters"><span class="std std-ref">Passing parameters to SQL queries</span></a> for all the details about executing
queries.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">statement</span><span class="p">:</span> <span class="n">Query</span></em><span class="sig-paren">)</span> → <a class="reference internal" href="#psycopg3.Copy" title="psycopg3.Copy">Copy</a><a class="headerlink" href="#psycopg3.Cursor.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate a <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code> operation and return an object to manage it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>statement</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg3.sql.Composable" title="psycopg3.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The copy operation to execute</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it must be called as <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">cur.copy()</span> <span class="pre">as</span> <span class="pre">copy:</span> <span class="pre">...</span></code></p>
</div>
<p>See <a class="reference internal" href="copy.html#copy"><span class="std std-ref">Using COPY TO and COPY FROM</span></a> for information about <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code>.</p>
</dd></dl>
<p class="rubric">Methods to retrieve results</p>
<p>Fetch methods are only available if the last operation produced results,
e.g. a <code class="sql docutils literal notranslate"><span class="pre">SELECT</span></code> or a command with <code class="sql docutils literal notranslate"><span class="pre">RETURNING</span></code>. They will raise
an exception if used with operations that don’t return result, such as an
<code class="sql docutils literal notranslate"><span class="pre">INSERT</span></code> with no <code class="sql docutils literal notranslate"><span class="pre">RETURNING</span></code> or an <code class="sql docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>cursors are iterable objects, so just using <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">record</span> <span class="pre">in</span>
<span class="pre">cursor</span></code> syntax will iterate on the records in the current recordset.</p>
</div>
<dl class="py method">
<dt id="psycopg3.Cursor.fetchone">
<code class="sig-name descname">fetchone</code><span class="sig-paren">(</span><span class="sig-paren">)</span> → Optional<span class="p">[</span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#psycopg3.Cursor.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next record from the current recordset.</p>
<p>Return <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> the recordset is finished.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.fetchmany">
<code class="sig-name descname">fetchmany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span> → List<span class="p">[</span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#psycopg3.Cursor.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next <em>size</em> records from the current recordset.</p>
<p><em>size</em> default to <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.arraysize</span></code> if not specified.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.fetchall">
<code class="sig-name descname">fetchall</code><span class="sig-paren">(</span><span class="sig-paren">)</span> → List<span class="p">[</span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#psycopg3.Cursor.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the remaining records from the current recordset.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.nextset">
<code class="sig-name descname">nextset</code><span class="sig-paren">(</span><span class="sig-paren">)</span> → Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a><span class="p">]</span><a class="headerlink" href="#psycopg3.Cursor.nextset" title="Permalink to this definition">¶</a></dt>
<dd><p>Move to the next result set if <a class="reference internal" href="#psycopg3.Cursor.execute" title="psycopg3.Cursor.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code></a> returned more than one.</p>
<p>Return <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> if a new result is available, which will be the one
methods <code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch*()</span></code> will operate on.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.pgresult">
<code class="sig-name descname">pgresult</code><a class="headerlink" href="#psycopg3.Cursor.pgresult" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="pq.html#psycopg3.pq.PGresult" title="psycopg3.pq.PGresult"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PGresult</span></code></a> exposed by the cursor.</p>
</dd></dl>
<p class="rubric">Information about the data</p>
<dl class="py attribute">
<dt id="psycopg3.Cursor.description">
<code class="sig-name descname">description</code><em class="property">: Optional<span class="p">[</span>List<span class="p">[</span><a class="reference internal" href="#psycopg3.Column" title="psycopg3.Column">Column</a><span class="p">]</span><span class="p">]</span></em><a class="headerlink" href="#psycopg3.Cursor.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of objects describing each column of the current queryset.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> if the last operation didn’t return a queryset.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.rowcount">
<code class="sig-name descname">rowcount</code><em class="property"> int</em><a class="headerlink" href="#psycopg3.Cursor.rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of records affected by the precedent operation.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.query">
<code class="sig-name descname">query</code><em class="property"> Optional[bytes]</em><a class="headerlink" href="#psycopg3.Cursor.query" title="Permalink to this definition">¶</a></dt>
<dd><p>The last query sent to the server, if available.</p>
<p>The query will be in PostgreSQL format (with <code class="docutils literal notranslate"><span class="pre">$1</span></code>, <code class="docutils literal notranslate"><span class="pre">$2</span></code>…
parameters), the parameters will <em>not</em> be merged to the query: see
<a class="reference internal" href="#psycopg3.Cursor.params" title="psycopg3.Cursor.params"><code class="xref py py-obj docutils literal notranslate"><span class="pre">params</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.params">
<code class="sig-name descname">params</code><em class="property"> Optional[List[Optional[bytes]]]</em><a class="headerlink" href="#psycopg3.Cursor.params" title="Permalink to this definition">¶</a></dt>
<dd><p>The last set of parameters sent to the server, if available.</p>
<p>The parameters are adapted to PostgreSQL format.</p>
</dd></dl>
</dd></dl>
</div>
<div class="section" id="the-asynccursor-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code> class<a class="headerlink" href="#the-asynccursor-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.AsyncCursor">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">AsyncCursor</code><a class="headerlink" href="#psycopg3.AsyncCursor" title="Permalink to this definition">¶</a></dt>
<dd><p>This class implements a DBAPI-inspired interface, with all the blocking
methods implemented as coroutines. Unless specified otherwise,
non-blocking methods are shared with the <a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code></a> class.</p>
<p>The following methods have the same behaviour of the matching <code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code>
methods, but should be called using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">await</span></code> keyword.</p>
<dl class="py attribute">
<dt id="psycopg3.AsyncCursor.connection">
<code class="sig-name descname">connection</code><em class="property">: <a class="reference internal" href="connection.html#psycopg3.AsyncConnection" title="psycopg3.AsyncConnection">AsyncConnection</a></em><a class="headerlink" href="#psycopg3.AsyncCursor.connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.close">
<em class="property">async </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>you can use <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> to close the cursor
automatically when the block is exited, but be careful about
the async quirkness: see <a class="reference internal" href="async.html#async-with"><span class="std std-ref">with async connections and cursors</span></a> for details.</p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.execute">
<em class="property">async </em><code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">prepare</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span> → <a class="reference internal" href="#psycopg3.AsyncCursor" title="psycopg3.AsyncCursor">AsyncCursor</a><a class="headerlink" href="#psycopg3.AsyncCursor.execute" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.executemany">
<em class="property">async </em><code class="sig-name descname">executemany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span><span class="p">:</span> <span class="n">Query</span></em>, <em class="sig-param"><span class="n">params_seq</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>Args<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.executemany" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">statement</span><span class="p">:</span> <span class="n">Query</span></em><span class="sig-paren">)</span> → <a class="reference internal" href="#psycopg3.AsyncCopy" title="psycopg3.AsyncCopy">AsyncCopy</a><a class="headerlink" href="#psycopg3.AsyncCursor.copy" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>it must be called as <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">cur.copy()</span> <span class="pre">as</span> <span class="pre">copy:</span> <span class="pre">...</span></code></p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.fetchone">
<em class="property">async </em><code class="sig-name descname">fetchone</code><span class="sig-paren">(</span><span class="sig-paren">)</span> → Optional<span class="p">[</span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#psycopg3.AsyncCursor.fetchone" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.fetchmany">
<em class="property">async </em><code class="sig-name descname">fetchmany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span> → List<span class="p">[</span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#psycopg3.AsyncCursor.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.fetchall">
<em class="property">async </em><code class="sig-name descname">fetchall</code><span class="sig-paren">(</span><span class="sig-paren">)</span> → List<span class="p">[</span>Sequence<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#psycopg3.AsyncCursor.fetchall" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>you can also use <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">record</span> <span class="pre">in</span> <span class="pre">cursor</span></code> to iterate on
the async cursor results.</p>
</div>
</dd></dl>
</div>
<div class="section" id="cursor-support-objects">
<h2>Cursor support objects<a class="headerlink" href="#cursor-support-objects" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.Column">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">Column</code><a class="headerlink" href="#psycopg3.Column" title="Permalink to this definition">¶</a></dt>
<dd><p>An object describing a column of data from a database result, <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/#description">as described
by the DBAPI</a>, so it can also be unpacked as a 7-items tuple.</p>
<p>The object is returned by <a class="reference internal" href="#psycopg3.Cursor.description" title="psycopg3.Cursor.description"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor.description</span></code></a>.</p>
<dl class="py method">
<dt id="psycopg3.Column.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#psycopg3.Column.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the column.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.type_code">
<em class="property">property </em><code class="sig-name descname">type_code</code><a class="headerlink" href="#psycopg3.Column.type_code" title="Permalink to this definition">¶</a></dt>
<dd><p>The numeric OID of the column.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.display_size">
<em class="property">property </em><code class="sig-name descname">display_size</code><a class="headerlink" href="#psycopg3.Column.display_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The field size, for <code class="sql docutils literal notranslate"><span class="pre">varchar(n)</span></code>, None otherwise.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.internal_size">
<em class="property">property </em><code class="sig-name descname">internal_size</code><a class="headerlink" href="#psycopg3.Column.internal_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The interal field size for fixed-size types, None otherwise.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.precision">
<em class="property">property </em><code class="sig-name descname">precision</code><a class="headerlink" href="#psycopg3.Column.precision" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of digits for fixed precision types.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.scale">
<em class="property">property </em><code class="sig-name descname">scale</code><a class="headerlink" href="#psycopg3.Column.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of digits after the decimal point if available.</p>
<p>TODO: probably better than precision for datetime objects? review.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="psycopg3.Copy">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">Copy</code><a class="headerlink" href="#psycopg3.Copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage a <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code> operation.</p>
<p>The object is normally returned by <code class="docutils literal notranslate"><span class="pre">with</span></code> <a class="reference internal" href="#psycopg3.Cursor.copy" title="psycopg3.Cursor.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor.copy()</span></code></a>.</p>
<p>See <a class="reference internal" href="copy.html#copy"><span class="std std-ref">Using COPY TO and COPY FROM</span></a> for details.</p>
<dl class="py method">
<dt id="psycopg3.Copy.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span> → <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)">bytes</a><a class="headerlink" href="#psycopg3.Copy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a row of data after a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">TO</span></code> operation.</p>
<p>Return an empty bytes string when the data is finished.</p>
<p>Instead of using <code class="xref py py-obj docutils literal notranslate"><span class="pre">read()</span></code> you can even iterate on the object to read
its data row by row, using <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">row</span> <span class="pre">in</span> <span class="pre">copy:</span> <span class="pre">...</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Copy.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)">bytes</a><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a block of data after a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">FROM</span></code> operation.</p>
<p>If the COPY is in binary format <em>buffer</em> must be <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>. In text mode
it can be either <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Copy.write_row">
<code class="sig-name descname">write_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">row</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.write_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a record after a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">FROM</span></code> operation.</p>
<p>The data in the tuple will be converted as configured on the cursor;
see <a class="reference internal" href="adaptation.html#adaptation"><span class="std std-ref">Data adaptation configuration</span></a> for details.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="psycopg3.AsyncCopy">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">AsyncCopy</code><a class="headerlink" href="#psycopg3.AsyncCopy" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage an asynchronous <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code> operation.</p>
<p>The object is normally returned by <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> <a class="reference internal" href="#psycopg3.AsyncCursor.copy" title="psycopg3.AsyncCursor.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor.copy()</span></code></a>. Its methods are
the same of the <a class="reference internal" href="#psycopg3.Copy" title="psycopg3.Copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Copy</span></code></a> object but offering an <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a> interface
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">await</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code>).</p>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.read">
<em class="property">async </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span> → <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)">bytes</a><a class="headerlink" href="#psycopg3.AsyncCopy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Instead of using <code class="xref py py-obj docutils literal notranslate"><span class="pre">read()</span></code> you can even iterate on the object to read
its data row by row, using <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">row</span> <span class="pre">in</span> <span class="pre">copy:</span> <span class="pre">...</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.write">
<em class="property">async </em><code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)">bytes</a><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.write_row">
<em class="property">async </em><code class="sig-name descname">write_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">row</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy.write_row" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sql.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql</span></code> – SQL string composition</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="connection.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Connection classes</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2020, Daniele Varrazzo and The Psycopg Team
            |
            <a class="muted-link" href="_sources/cursor.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Cursor classes</a><ul>
<li><a class="reference internal" href="#the-cursor-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code> class</a></li>
<li><a class="reference internal" href="#the-asynccursor-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code> class</a></li>
<li><a class="reference internal" href="#cursor-support-objects">Cursor support objects</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
  </body>
</html>
<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Cursor classes" href="cursors.html" /><link rel="prev" title="The psycopg module" href="module.html" />

    <meta name="generator" content="sphinx-4.2.0, furo 2021.11.23"/>
        <title>Connection classes - psycopg 3.0.5.dev0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=7f0192ddeb2adecfbaa87ffbcf67d16358b30bc1" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    <link rel="stylesheet" type="text/css" href="../_static/psycopg.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 1rem;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<div class="announcement">
  <aside class="announcement-content">
     <a style="text-decoration: none; color: white;"
   href="https://github.com/sponsors/dvarrazzo/">
   <img height="24px" width="24px" src="/img/logo/psycopg-48.png"/>
    Sponsor psycopg3 on GitHub
</a>
 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">psycopg 3.0.5.dev0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/psycopg.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/psycopg.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">psycopg 3.0.5.dev0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../basic/index.html">Getting started with Psycopg 3</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../basic/install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/usage.html">Basic module usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/params.html">Passing parameters to SQL queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/adapt.html">Adapting basic Python types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/pgtypes.html">Adapting other PostgreSQL types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/transactions.html">Transaction management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/copy.html">Using COPY TO and COPY FROM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/from_pg2.html">Differences from <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../advanced/index.html">More advanced topics</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced/async.html">Asynchronous operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/typing.html">Static Typing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/rows.html">Row factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/pool.html">Connection pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/cursors.html">Cursor types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/adapt.html">Data adaptation configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/prepare.html">Prepared statements</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Psycopg 3 API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="module.html">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg</span></code> module</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Connection classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cursors.html">Cursor classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql</span></code> – SQL string composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="rows.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rows</span></code> – row factory implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">errors</span></code> – Package exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="conninfo.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">conninfo</span></code> – manipulate connection strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="adapt.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">adapt</span></code> – Types adaptation</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">types</span></code> – Types information and adapters</a></li>
<li class="toctree-l2"><a class="reference internal" href="abc.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">abc</span></code> – Psycopg abstract classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="pq.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pq</span></code> – libpq wrapper module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pool.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg_pool</span></code> – Connection pool implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="dns.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_dns</span></code> – DNS resolution utilities</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html"><code class="docutils literal notranslate"><span class="pre">psycopg</span></code> release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news_pool.html"><code class="docutils literal notranslate"><span class="pre">psycopg_pool</span></code> release notes</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="connection-classes">
<h1>Connection classes<a class="headerlink" href="#connection-classes" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code></a> and <a class="reference internal" href="#psycopg.AsyncConnection" title="psycopg.AsyncConnection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> classes are the main wrappers for a
PostgreSQL database session. You can imagine them similar to a <strong class="program">psql</strong>
session.</p>
<p>One of the differences compared to <strong class="program">psql</strong> is that a <a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code></a>
usually handles a transaction automatically: other sessions will not be able
to see the changes until you have committed them, more or less explicitly.
Take a look to <a class="reference internal" href="../basic/transactions.html#transactions"><span class="std std-ref">Transaction management</span></a> for the details.</p>
<section id="the-connection-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code> class<a class="headerlink" href="#the-connection-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psycopg.Connection">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pgconn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for a connection to the database.</p>
<p>This class implements a <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/#connection-objects">DBAPI-compliant interface</a>. It is what you want
to use if you write a “classic”, blocking program (eventually using
threads or Eventlet/gevent for concurrency). If your program uses <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a>
you might want to use <a class="reference internal" href="#psycopg.AsyncConnection" title="psycopg.AsyncConnection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a> instead.</p>
<p>Connections behave as context managers: on block exit, the current
transaction will be committed (or rolled back, in case of exception) and
the connection will be closed.</p>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.connect">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conninfo</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocommit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'False'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="rows.html#psycopg.rows.RowFactory" title="psycopg.rows.RowFactory"><span class="pre">psycopg.rows.RowFactory</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="abc.html#psycopg.abc.AdaptContext" title="psycopg.abc.AdaptContext"><span class="pre">psycopg.abc.AdaptContext</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><span class="pre">Connection</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Row</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#psycopg.Connection.connect" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conninfo</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocommit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'False'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="abc.html#psycopg.abc.AdaptContext" title="psycopg.abc.AdaptContext"><span class="pre">psycopg.abc.AdaptContext</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><span class="pre">Connection</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TupleRow</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Connect to a database server and return a new <a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>conninfo</strong> – The <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING">connection string</a> (a <code class="docutils literal notranslate"><span class="pre">postgresql://</span></code> url or
a list of <code class="docutils literal notranslate"><span class="pre">key=value</span> <span class="pre">pairs</span></code>) to specify where and
how to connect.</p></li>
<li><p><strong>kwargs</strong> – Further parameters specifying the connection string.
They override the ones specified in <em>conninfo</em>.</p></li>
<li><p><strong>autocommit</strong> – If <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> don’t start transactions automatically.
See <code class="xref py py-obj docutils literal notranslate"><span class="pre">transactions</span></code> for details.</p></li>
<li><p><strong>row_factory</strong> – The row factory specifying what type of records
to create fetching data (default:
<a class="reference internal" href="rows.html#psycopg.rows.tuple_row" title="psycopg.rows.tuple_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple_row()</span></code></a>). See
<a class="reference internal" href="../advanced/rows.html#row-factories"><span class="std std-ref">Row factories</span></a> for details.</p></li>
</ul>
</dd>
</dl>
<p>More specialized use:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>context</strong> – A context to copy the initial adapters configuration
from. It might be an <a class="reference internal" href="adapt.html#psycopg.adapt.AdaptersMap" title="psycopg.adapt.AdaptersMap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AdaptersMap</span></code></a> with
customized loaders and dumpers, used as a template to
create several connections. See <a class="reference internal" href="../advanced/adapt.html#adaptation"><span class="std std-ref">Data adaptation configuration</span></a> for
further details.</p>
</dd>
</dl>
<p>This method is also aliased as <a class="reference internal" href="module.html#psycopg.connect" title="psycopg.connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg.connect()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p>the list of <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-PARAMKEYWORDS">the accepted connection parameters</a></p></li>
<li><p>the <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-envars.html">environment variables</a> affecting connection</p></li>
</ul>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the database connection.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">psycopg</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>to close the connection automatically when the block is exited.
See <a class="reference internal" href="../basic/usage.html#with-connection"><span class="std std-ref">Connection context</span></a>.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.closed">
<span class="sig-name descname"><span class="pre">closed</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#psycopg.Connection.closed" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> if the connection is closed.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.broken">
<span class="sig-name descname"><span class="pre">broken</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#psycopg.Connection.broken" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> if the connection was interrupted.</p>
<p>A broken connection is always <a class="reference internal" href="#psycopg.Connection.closed" title="psycopg.Connection.closed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">closed</span></code></a>, but wasn’t closed in a clean
way, such as using <a class="reference internal" href="#psycopg.Connection.close" title="psycopg.Connection.close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">close()</span></code></a> or a <code class="docutils literal notranslate"><span class="pre">with</span></code> block.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.cursor">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">RowFactory</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="cursors.html#psycopg.Cursor" title="psycopg.Cursor"><span class="pre">Cursor</span></a></span></span><a class="headerlink" href="#psycopg.Connection.cursor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">RowFactory</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrollable</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withhold</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="cursors.html#psycopg.ServerCursor" title="psycopg.ServerCursor"><span class="pre">ServerCursor</span></a></span></span></dt>
<dd><p>Return a new cursor to send commands and queries to the connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – If not specified create a client-side cursor, if
specified create a server-side cursor. See
<a class="reference internal" href="../advanced/cursors.html#cursor-types"><span class="std std-ref">Cursor types</span></a> for details.</p></li>
<li><p><strong>binary</strong> – If <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> return binary values from the database. All
the types returned by the query must have a binary
loader. See <a class="reference internal" href="../basic/params.html#binary-data"><span class="std std-ref">Binary parameters and results</span></a> for details.</p></li>
<li><p><strong>row_factory</strong> – If specified override the <a class="reference internal" href="#psycopg.Connection.row_factory" title="psycopg.Connection.row_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">row_factory</span></code></a> set on the
connection. See <a class="reference internal" href="../advanced/rows.html#row-factories"><span class="std std-ref">Row factories</span></a> for details.</p></li>
<li><p><strong>scrollable</strong> – Specify the <a class="reference internal" href="cursors.html#psycopg.ServerCursor.scrollable" title="psycopg.ServerCursor.scrollable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scrollable</span></code></a> property of
the server-side cursor created.</p></li>
<li><p><strong>withhold</strong> – Specify the <a class="reference internal" href="cursors.html#psycopg.ServerCursor.withhold" title="psycopg.ServerCursor.withhold"><code class="xref py py-obj docutils literal notranslate"><span class="pre">withhold</span></code></a> property of
the server-side cursor created.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A cursor of the class specified by <a class="reference internal" href="#psycopg.Connection.cursor_factory" title="psycopg.Connection.cursor_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cursor_factory</span></code></a> (or
<a class="reference internal" href="#psycopg.Connection.server_cursor_factory" title="psycopg.Connection.server_cursor_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">server_cursor_factory</span></code></a> if <em>name</em> is specified).</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">cur</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>to close the cursor automatically when the block is exited.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.cursor_factory">
<span class="sig-name descname"><span class="pre">cursor_factory</span></span><em class="property"><span class="pre">:</span> <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="cursors.html#psycopg.Cursor" title="psycopg.Cursor"><span class="pre">psycopg.Cursor</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Connection.cursor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The type, or factory function, returned by <a class="reference internal" href="#psycopg.Connection.cursor" title="psycopg.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cursor()</span></code></a> and <a class="reference internal" href="#psycopg.Connection.execute" title="psycopg.Connection.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code></a>.</p>
<p>Default is <a class="reference internal" href="cursors.html#psycopg.Cursor" title="psycopg.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg.Cursor</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.server_cursor_factory">
<span class="sig-name descname"><span class="pre">server_cursor_factory</span></span><em class="property"><span class="pre">:</span> <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="cursors.html#psycopg.ServerCursor" title="psycopg.ServerCursor"><span class="pre">psycopg.ServerCursor</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Connection.server_cursor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The type, or factory function, returned by <a class="reference internal" href="#psycopg.Connection.cursor" title="psycopg.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cursor()</span></code></a> when a name is
specified.</p>
<p>Default is <a class="reference internal" href="cursors.html#psycopg.ServerCursor" title="psycopg.ServerCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg.ServerCursor</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.row_factory">
<span class="sig-name descname"><span class="pre">row_factory</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="rows.html#psycopg.rows.RowFactory" title="psycopg.rows.RowFactory"><span class="pre">psycopg.rows.RowFactory</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Connection.row_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The row factory defining the type of rows returned by
<a class="reference internal" href="cursors.html#psycopg.Cursor.fetchone" title="psycopg.Cursor.fetchone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetchone()</span></code></a> and the other cursor fetch methods.</p>
<p>The default is <a class="reference internal" href="rows.html#psycopg.rows.tuple_row" title="psycopg.rows.tuple_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple_row</span></code></a>, which means that the fetch
methods will return simple tuples.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See <a class="reference internal" href="../advanced/rows.html#row-factories"><span class="std std-ref">Row factories</span></a> for details about defining the
objects returned by cursors.</p>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a query and return a cursor to read its results.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="cursors.html#psycopg.Cursor" title="psycopg.Cursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cursor</span></code></a>[~Row]</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg.sql.Composable" title="psycopg.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The query to execute.</p></li>
<li><p><strong>params</strong> (<em>Sequence</em><em> or </em><em>Mapping</em>) – The parameters to pass to the query, if any.</p></li>
<li><p><strong>prepare</strong> – Force (<code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code>) or disallow (<code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code>) preparation of
the query. By default (<code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>) prepare automatically. See
<a class="reference internal" href="../advanced/prepare.html#prepared-statements"><span class="std std-ref">Prepared statements</span></a>.</p></li>
<li><p><strong>binary</strong> – If <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> the cursor will return binary values from the
database. All the types returned by the query must have a binary
loader. See <a class="reference internal" href="../basic/params.html#binary-data"><span class="std std-ref">Binary parameters and results</span></a> for details.</p></li>
</ul>
</dd>
</dl>
<p>The method simply creates a <a class="reference internal" href="cursors.html#psycopg.Cursor" title="psycopg.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code></a> instance, <a class="reference internal" href="cursors.html#psycopg.Cursor.execute" title="psycopg.Cursor.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code></a> the
query requested, and returns it.</p>
<p>See <a class="reference internal" href="../basic/params.html#query-parameters"><span class="std std-ref">Passing parameters to SQL queries</span></a> for all the details about executing
queries.</p>
</dd></dl>
<p class="rubric">Transaction management methods</p>
<p>For details see <a class="reference internal" href="../basic/transactions.html#transactions"><span class="std std-ref">Transaction management</span></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.commit">
<span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit any pending transaction to the database.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.rollback">
<span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Roll back to the start of any pending transaction.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.transaction">
<span class="sig-name descname"><span class="pre">transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">savepoint_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rollback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a context block with a new transaction or nested transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>savepoint_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – Name of the savepoint used to manage a nested
transaction. If <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, one will be chosen automatically.</p></li>
<li><p><strong>force_rollback</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Roll back the transaction at the end of the
block even if there were no error (e.g. to try a no-op process).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#psycopg.Transaction" title="psycopg.Transaction">Transaction</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The method must be called with a syntax such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
    <span class="o">...</span>

<span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The latter is useful if you need to interact with the
<a class="reference internal" href="#psycopg.Transaction" title="psycopg.Transaction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Transaction</span></code></a> object. See <a class="reference internal" href="../basic/transactions.html#transaction-context"><span class="std std-ref">Transaction contexts</span></a> for details.</p>
</div>
<p>Inside a transaction block it will not be possible to call <a class="reference internal" href="#psycopg.Connection.commit" title="psycopg.Connection.commit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">commit()</span></code></a>
or <a class="reference internal" href="#psycopg.Connection.rollback" title="psycopg.Connection.rollback"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rollback()</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.autocommit">
<span class="sig-name descname"><span class="pre">autocommit</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#psycopg.Connection.autocommit" title="Permalink to this definition">¶</a></dt>
<dd><p>The autocommit state of the connection.</p>
<p>The property is writable for sync connections, read-only for async
ones: you should call <code class="docutils literal notranslate"><span class="pre">await</span></code> <a class="reference internal" href="#psycopg.AsyncConnection.set_autocommit" title="psycopg.AsyncConnection.set_autocommit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_autocommit</span></code></a>
<code class="samp docutils literal notranslate"><span class="pre">(</span><em><span class="pre">value</span></em><span class="pre">)</span></code> instead.</p>
</dd></dl>
<p>The following three properties control the characteristics of new
transactions. See <a class="reference internal" href="../basic/transactions.html#transaction-characteristics"><span class="std std-ref">Transaction characteristics</span></a> for details.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.isolation_level">
<span class="sig-name descname"><span class="pre">isolation_level</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#psycopg.IsolationLevel" title="psycopg.IsolationLevel"><span class="pre">IsolationLevel</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Connection.isolation_level" title="Permalink to this definition">¶</a></dt>
<dd><p>The isolation level of the new transactions started on the connection.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> means use the default set in the <a class="reference external" href="https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-DEFAULT-TRANSACTION-ISOLATION">default_transaction_isolation</a>
configuration parameter of the server.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.read_only">
<span class="sig-name descname"><span class="pre">read_only</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Connection.read_only" title="Permalink to this definition">¶</a></dt>
<dd><p>The read-only state of the new transactions started on the connection.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> means use the default set in the <a class="reference external" href="https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-DEFAULT-TRANSACTION-READ-ONLY">default_transaction_read_only</a>
configuration parameter of the server.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.deferrable">
<span class="sig-name descname"><span class="pre">deferrable</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Connection.deferrable" title="Permalink to this definition">¶</a></dt>
<dd><p>The deferrable state of the new transactions started on the connection.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> means use the default set in the <a class="reference external" href="https://www.postgresql.org/docs/current/runtime-config-client.html#GUC-DEFAULT-TRANSACTION-DEFERRABLE">default_transaction_deferrable</a>
configuration parameter of the server.</p>
</dd></dl>
<p class="rubric">Checking and configuring the connection state</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.pgconn">
<span class="sig-name descname"><span class="pre">pgconn</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="pq.html#psycopg.pq.PGconn" title="psycopg.pq.PGconn"><span class="pre">psycopg.pq.PGconn</span></a></em><a class="headerlink" href="#psycopg.Connection.pgconn" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="pq.html#psycopg.pq.PGconn" title="psycopg.pq.PGconn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">PGconn</span></code></a> libpq connection wrapper underlying the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code>.</p>
<p>It can be used to send low level commands to PostgreSQL and access to
features not currently wrapped by Psycopg.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.info">
<span class="sig-name descname"><span class="pre">info</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#psycopg.ConnectionInfo" title="psycopg.ConnectionInfo"><span class="pre">ConnectionInfo</span></a></em><a class="headerlink" href="#psycopg.Connection.info" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#psycopg.ConnectionInfo" title="psycopg.ConnectionInfo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ConnectionInfo</span></code></a> attribute to inspect connection properties.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.prepare_threshold">
<span class="sig-name descname"><span class="pre">prepare_threshold</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Connection.prepare_threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of times a query is executed before it is prepared.</p>
<ul class="simple">
<li><p>If it is set to 0, every query is prepared the first time is
executed.</p></li>
<li><p>If it is set to <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>, prepared statements are disabled on the
connection.</p></li>
</ul>
<p>Default value: 5</p>
<p>See <a class="reference internal" href="../advanced/prepare.html#prepared-statements"><span class="std std-ref">Prepared statements</span></a> for details.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Connection.prepared_max">
<span class="sig-name descname"><span class="pre">prepared_max</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#psycopg.Connection.prepared_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of prepared statements on the connection.</p>
<p>Default value: 100</p>
<p>If more queries need to be prepared, old ones are <a class="reference external" href="https://www.postgresql.org/docs/current/sql-deallocate.html">deallocated</a>.</p>
</dd></dl>
<p class="rubric">Methods you can use to do something cool</p>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.cancel">
<span class="sig-name descname"><span class="pre">cancel</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel the current operation on the connection.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.notifies">
<span class="sig-name descname"><span class="pre">notifies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.notifies" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield <a class="reference internal" href="#psycopg.Notify" title="psycopg.Notify"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Notify</span></code></a> objects as soon as they are received from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></a>[<a class="reference internal" href="#psycopg.Notify" title="psycopg.Notify"><code class="xref py py-class docutils literal notranslate"><span class="pre">Notify</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
</dl>
<p>Notifies are recevied after using <code class="sql docutils literal notranslate"><span class="pre">LISTEN</span></code> in a connection, when
any sessions in the database generates a <code class="sql docutils literal notranslate"><span class="pre">NOTIFY</span></code> on one of the
listened channels.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.add_notify_handler">
<span class="sig-name descname"><span class="pre">add_notify_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.add_notify_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a callable to be invoked whenever a notification is received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>callback</strong> – a callable taking a <a class="reference internal" href="#psycopg.Notify" title="psycopg.Notify"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Notify</span></code></a> parameter.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.remove_notify_handler">
<span class="sig-name descname"><span class="pre">remove_notify_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.remove_notify_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister a notification callable previously registered.</p>
</dd></dl>
<p>See <a class="reference internal" href="../advanced/async.html#async-notify"><span class="std std-ref">Asynchronous notifications</span></a> for details.</p>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.add_notice_handler">
<span class="sig-name descname"><span class="pre">add_notice_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.add_notice_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a callable to be invoked when a notice message is received.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>callback</strong> – a callable taking a <a class="reference internal" href="errors.html#psycopg.errors.Diagnostic" title="psycopg.errors.Diagnostic"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Diagnostic</span></code></a>
object containing all the details about the notice.</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.remove_notice_handler">
<span class="sig-name descname"><span class="pre">remove_notice_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.remove_notice_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister a notice message callable previously registered.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.Connection.fileno">
<span class="sig-name descname"><span class="pre">fileno</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Connection.fileno" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the file descriptor of the connection.</p>
<p>This function allows to use the connection as file-like object in
functions waiting for readiness, such as the ones defined in the
<a class="reference external" href="https://docs.python.org/3/library/selectors.html#module-selectors" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">selectors</span></code></a> module.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</section>
<section id="the-asyncconnection-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection</span></code> class<a class="headerlink" href="#the-asyncconnection-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psycopg.AsyncConnection">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">AsyncConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pgconn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous wrapper for a connection to the database.</p>
<p>This class implements a DBAPI-inspired interface, with all the blocking
methods implemented as coroutines. Unless specified otherwise,
non-blocking methods are shared with the <a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code></a> class.</p>
<p>The following methods have the same behaviour of the matching <code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code>
methods, but should be called using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">await</span></code> keyword.</p>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.connect">
<em class="property"><span class="pre">async</span> <span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conninfo</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocommit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'False'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="rows.html#psycopg.rows.AsyncRowFactory" title="psycopg.rows.AsyncRowFactory"><span class="pre">psycopg.rows.AsyncRowFactory</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="abc.html#psycopg.abc.AdaptContext" title="psycopg.abc.AdaptContext"><span class="pre">psycopg.abc.AdaptContext</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#psycopg.AsyncConnection" title="psycopg.AsyncConnection"><span class="pre">AsyncConnection</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Row</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#psycopg.AsyncConnection.connect" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span> <span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">conninfo</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autocommit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'False'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="abc.html#psycopg.abc.AdaptContext" title="psycopg.abc.AdaptContext"><span class="pre">psycopg.abc.AdaptContext</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'None'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#psycopg.AsyncConnection" title="psycopg.AsyncConnection"><span class="pre">AsyncConnection</span></a><span class="p"><span class="pre">[</span></span><span class="pre">TupleRow</span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg.AsyncConnection" title="psycopg.AsyncConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncConnection</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.close">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> to close the connection
automatically when the block is exited, but be careful about
the async quirkness: see <a class="reference internal" href="../advanced/async.html#async-with"><span class="std std-ref">with async connections</span></a> for details.</p>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.cursor">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">RowFactory</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="cursors.html#psycopg.AsyncCursor" title="psycopg.AsyncCursor"><span class="pre">AsyncCursor</span></a></span></span><a class="headerlink" href="#psycopg.AsyncConnection.cursor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">cursor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row_factory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">RowFactory</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scrollable</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">withhold</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="cursors.html#psycopg.AsyncServerCursor" title="psycopg.AsyncServerCursor"><span class="pre">AsyncServerCursor</span></a></span></span></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span> <span class="k">as</span> <span class="n">cur</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>to close the cursor automatically when the block is exited.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.cursor_factory">
<span class="sig-name descname"><span class="pre">cursor_factory</span></span><em class="property"><span class="pre">:</span> <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="cursors.html#psycopg.AsyncCursor" title="psycopg.AsyncCursor"><span class="pre">psycopg.AsyncCursor</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.AsyncConnection.cursor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Default is <a class="reference internal" href="cursors.html#psycopg.AsyncCursor" title="psycopg.AsyncCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg.AsyncCursor</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.server_cursor_factory">
<span class="sig-name descname"><span class="pre">server_cursor_factory</span></span><em class="property"><span class="pre">:</span> <span class="pre">Type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="cursors.html#psycopg.AsyncServerCursor" title="psycopg.AsyncServerCursor"><span class="pre">psycopg.AsyncServerCursor</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.AsyncConnection.server_cursor_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Default is <a class="reference internal" href="cursors.html#psycopg.AsyncServerCursor" title="psycopg.AsyncServerCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg.AsyncServerCursor</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.row_factory">
<span class="sig-name descname"><span class="pre">row_factory</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="rows.html#psycopg.rows.AsyncRowFactory" title="psycopg.rows.AsyncRowFactory"><span class="pre">psycopg.rows.AsyncRowFactory</span></a><span class="p"><span class="pre">[</span></span><span class="pre">psycopg.rows.Row</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.AsyncConnection.row_factory" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.execute">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prepare</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">binary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.execute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="cursors.html#psycopg.AsyncCursor" title="psycopg.AsyncCursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCursor</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.commit">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">commit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.commit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.rollback">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">rollback</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.rollback" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.transaction">
<span class="sig-name descname"><span class="pre">transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">savepoint_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rollback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a context block with a new transaction or nested transaction.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg.AsyncTransaction" title="psycopg.AsyncTransaction">AsyncTransaction</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It must be called as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">conn</span><span class="o">.</span><span class="n">transaction</span><span class="p">()</span> <span class="k">as</span> <span class="n">tx</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.notifies">
<span class="sig-name descname"><span class="pre">notifies</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.notifies" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AsyncGenerator" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncGenerator</span></code></a>[<a class="reference internal" href="#psycopg.Notify" title="psycopg.Notify"><code class="xref py py-class docutils literal notranslate"><span class="pre">Notify</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.set_autocommit">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">set_autocommit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.set_autocommit" title="Permalink to this definition">¶</a></dt>
<dd><p>Async version of the <a class="reference internal" href="#psycopg.Connection.autocommit" title="psycopg.Connection.autocommit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">autocommit</span></code></a> setter.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.set_isolation_level">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">set_isolation_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.set_isolation_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Async version of the <a class="reference internal" href="#psycopg.Connection.isolation_level" title="psycopg.Connection.isolation_level"><code class="xref py py-obj docutils literal notranslate"><span class="pre">isolation_level</span></code></a> setter.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.set_read_only">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">set_read_only</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.set_read_only" title="Permalink to this definition">¶</a></dt>
<dd><p>Async version of the <a class="reference internal" href="#psycopg.Connection.read_only" title="psycopg.Connection.read_only"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_only</span></code></a> setter.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.AsyncConnection.set_deferrable">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">set_deferrable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncConnection.set_deferrable" title="Permalink to this definition">¶</a></dt>
<dd><p>Async version of the <a class="reference internal" href="#psycopg.Connection.deferrable" title="psycopg.Connection.deferrable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">deferrable</span></code></a> setter.</p>
</dd></dl>
</dd></dl>
</section>
<section id="connection-support-objects">
<h2>Connection support objects<a class="headerlink" href="#connection-support-objects" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="psycopg.Notify">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">Notify</span></span><a class="headerlink" href="#psycopg.Notify" title="Permalink to this definition">¶</a></dt>
<dd><p>An asynchronous notification received from the database.</p>
<p>The object is usually returned by <a class="reference internal" href="#psycopg.Connection.notifies" title="psycopg.Connection.notifies"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.notifies()</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Notify.channel">
<span class="sig-name descname"><span class="pre">channel</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.Notify.channel" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the channel on which the notification was received.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Notify.payload">
<span class="sig-name descname"><span class="pre">payload</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.Notify.payload" title="Permalink to this definition">¶</a></dt>
<dd><p>The message attached to the notification.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Notify.pid">
<span class="sig-name descname"><span class="pre">pid</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#psycopg.Notify.pid" title="Permalink to this definition">¶</a></dt>
<dd><p>The PID of the backend process which sent the notification.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">ConnectionInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pgconn</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.ConnectionInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Allow access to information about the connection.</p>
<p>The object is usually returned by <a class="reference internal" href="#psycopg.Connection.info" title="psycopg.Connection.info"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.info</span></code></a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.dsn">
<span class="sig-name descname"><span class="pre">dsn</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.dsn" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the connection string to connect to the database.</p>
<p>The string contains all the parameters set to a non-default value,
which might come either from the connection string and parameters
passed to <a class="reference internal" href="#psycopg.Connection.connect" title="psycopg.Connection.connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect()</span></code></a> or from environment variables. The
password is never returned (you can read it using the <a class="reference internal" href="#psycopg.ConnectionInfo.password" title="psycopg.ConnectionInfo.password"><code class="xref py py-obj docutils literal notranslate"><span class="pre">password</span></code></a>
attribute).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#psycopg.ConnectionInfo.get_parameters" title="psycopg.ConnectionInfo.get_parameters"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_parameters()</span></code></a> method returns the same information
as a dict.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.status">
<span class="sig-name descname"><span class="pre">status</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="pq.html#psycopg.pq.ConnStatus" title="psycopg.pq.ConnStatus"><span class="pre">pq.ConnStatus</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.status" title="Permalink to this definition">¶</a></dt>
<dd><p>The status of the connection. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQSTATUS"><span class="pre">PQstatus()</span></a></code>.</p>
<p>The status can be one of a number of values. However, only two of
these are seen outside of an asynchronous connection procedure:
<a class="reference internal" href="pq.html#psycopg.pq.ConnStatus.OK" title="psycopg.pq.ConnStatus.OK"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OK</span></code></a> and <a class="reference internal" href="pq.html#psycopg.pq.ConnStatus.BAD" title="psycopg.pq.ConnStatus.BAD"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BAD</span></code></a>. A good connection to the
database has the status <code class="xref py py-obj docutils literal notranslate"><span class="pre">OK</span></code>. Ordinarily, an <code class="xref py py-obj docutils literal notranslate"><span class="pre">OK</span></code> status will remain
so until <a class="reference internal" href="#psycopg.Connection.close" title="psycopg.Connection.close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.close()</span></code></a>, but a communications failure might
result in the status changing to <code class="xref py py-obj docutils literal notranslate"><span class="pre">BAD</span></code> prematurely.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.transaction_status">
<span class="sig-name descname"><span class="pre">transaction_status</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="pq.html#psycopg.pq.TransactionStatus" title="psycopg.pq.TransactionStatus"><span class="pre">pq.TransactionStatus</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.transaction_status" title="Permalink to this definition">¶</a></dt>
<dd><p>The current in-transaction status of the server.
See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQTRANSACTIONSTATUS"><span class="pre">PQtransactionStatus()</span></a></code>.</p>
<p>The status can be <a class="reference internal" href="pq.html#psycopg.pq.TransactionStatus.IDLE" title="psycopg.pq.TransactionStatus.IDLE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">IDLE</span></code></a> (currently idle),
<a class="reference internal" href="pq.html#psycopg.pq.TransactionStatus.ACTIVE" title="psycopg.pq.TransactionStatus.ACTIVE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ACTIVE</span></code></a> (a command is in progress),
<a class="reference internal" href="pq.html#psycopg.pq.TransactionStatus.INTRANS" title="psycopg.pq.TransactionStatus.INTRANS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">INTRANS</span></code></a> (idle, in a valid transaction block),
or <a class="reference internal" href="pq.html#psycopg.pq.TransactionStatus.INERROR" title="psycopg.pq.TransactionStatus.INERROR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">INERROR</span></code></a> (idle, in a failed transaction
block). <a class="reference internal" href="pq.html#psycopg.pq.TransactionStatus.UNKNOWN" title="psycopg.pq.TransactionStatus.UNKNOWN"><code class="xref py py-obj docutils literal notranslate"><span class="pre">UNKNOWN</span></code></a> is reported if the connection
is bad. <code class="xref py py-obj docutils literal notranslate"><span class="pre">ACTIVE</span></code> is reported only when a query has been sent to the
server and not yet completed.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.backend_pid">
<span class="sig-name descname"><span class="pre">backend_pid</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.backend_pid" title="Permalink to this definition">¶</a></dt>
<dd><p>The process ID (PID) of the backend process handling this connection.
See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQBACKENDPID"><span class="pre">PQbackendPID()</span></a></code>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.server_version">
<span class="sig-name descname"><span class="pre">server_version</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.server_version" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer representing the server version. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQSERVERVERSION"><span class="pre">PQserverVersion()</span></a></code>.</p>
<p>The number is formed by converting the major, minor, and revision
numbers into two-decimal-digit numbers and appending them together.
After PostgreSQL 10 the minor version was dropped, so the second group
of digits is always 00. For example, version 9.3.5 is returned as
90305, version 10.2 as 100002.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.error_message">
<span class="sig-name descname"><span class="pre">error_message</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.error_message" title="Permalink to this definition">¶</a></dt>
<dd><p>The error message most recently generated by an operation on the connection.
See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQERRORMESSAGE"><span class="pre">PQerrorMessage()</span></a></code>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.get_parameters">
<span class="sig-name descname"><span class="pre">get_parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.ConnectionInfo.get_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the connection parameters values.</p>
<p>Return all the parameters set to a non-default value, which might come
either from the connection string and parameters passed to
<a class="reference internal" href="#psycopg.Connection.connect" title="psycopg.Connection.connect"><code class="xref py py-obj docutils literal notranslate"><span class="pre">connect()</span></code></a> or from environment variables. The password
is never returned (you can read it using the <a class="reference internal" href="#psycopg.ConnectionInfo.password" title="psycopg.ConnectionInfo.password"><code class="xref py py-obj docutils literal notranslate"><span class="pre">password</span></code></a> attribute).</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dict</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="#psycopg.ConnectionInfo.dsn" title="psycopg.ConnectionInfo.dsn"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dsn</span></code></a> attribute returns the same information in the form
as a string.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.timezone">
<span class="sig-name descname"><span class="pre">timezone</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.tzinfo" title="(in Python v3.10)"><span class="pre">datetime.tzinfo</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.timezone" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python timezone info of the connection’s timezone.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">timezone</span>
<span class="go">zoneinfo.ZoneInfo(key='Europe/Rome')</span>
</pre></div>
</div>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.host">
<span class="sig-name descname"><span class="pre">host</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.host" title="Permalink to this definition">¶</a></dt>
<dd><p>The server host name of the active connection. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQHOST"><span class="pre">PQhost()</span></a></code>.</p>
<p>This can be a host name, an IP address, or a directory path if the
connection is via Unix socket. (The path case can be distinguished
because it will always be an absolute path, beginning with <code class="docutils literal notranslate"><span class="pre">/</span></code>.)</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.hostaddr">
<span class="sig-name descname"><span class="pre">hostaddr</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.hostaddr" title="Permalink to this definition">¶</a></dt>
<dd><p>The server IP address of the connection. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQHOSTADDR"><span class="pre">PQhostaddr()</span></a></code>.</p>
<p>Only available if the libpq used is at least from PostgreSQL 12.
Raise <a class="reference internal" href="errors.html#psycopg.NotSupportedError" title="psycopg.NotSupportedError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">NotSupportedError</span></code></a> otherwise.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.port">
<span class="sig-name descname"><span class="pre">port</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.port" title="Permalink to this definition">¶</a></dt>
<dd><p>The port of the active connection. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQPORT"><span class="pre">PQport()</span></a></code>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.dbname">
<span class="sig-name descname"><span class="pre">dbname</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.dbname" title="Permalink to this definition">¶</a></dt>
<dd><p>The database name of the connection. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQDB"><span class="pre">PQdb()</span></a></code>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.user">
<span class="sig-name descname"><span class="pre">user</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.user" title="Permalink to this definition">¶</a></dt>
<dd><p>The user name of the connection. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQUSER"><span class="pre">PQuser()</span></a></code>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.password">
<span class="sig-name descname"><span class="pre">password</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.password" title="Permalink to this definition">¶</a></dt>
<dd><p>The password of the connection. See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQPASS"><span class="pre">PQpass()</span></a></code>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.options">
<span class="sig-name descname"><span class="pre">options</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.options" title="Permalink to this definition">¶</a></dt>
<dd><p>The command-line options passed in the connection request.
See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQOPTIONS"><span class="pre">PQoptions</span></a></code>.</p>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.parameter_status">
<span class="sig-name descname"><span class="pre">parameter_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">param_name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.ConnectionInfo.parameter_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a parameter setting of the connection.</p>
<p>Return <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> is the parameter is unknown.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
<p>Example of parameters are <code class="docutils literal notranslate"><span class="pre">server_version</span></code>,
<code class="docutils literal notranslate"><span class="pre">standard_conforming_strings</span></code>… See <code class="docutils literal notranslate"><a class="reference external" href="https://www.postgresql.org/docs/14/libpq-status.html#LIBPQ-PQPARAMETERSTATUS"><span class="pre">PQparameterStatus()</span></a></code> for
all the available parameters.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.ConnectionInfo.encoding">
<span class="sig-name descname"><span class="pre">encoding</span></span><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#psycopg.ConnectionInfo.encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>The Python codec name of the connection’s client encoding.</p>
<p>The value returned is always normalized to the Python codec
<a class="reference external" href="https://docs.python.org/3/library/codecs.html#codecs.CodecInfo.name" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"SET client_encoding TO LATIN9"</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">encoding</span>
<span class="s1">'iso8859-15'</span>
</pre></div>
</div>
<p>A few PostgreSQL encodings are not available in Python and cannot be
selected (currently <code class="docutils literal notranslate"><span class="pre">EUC_TW</span></code>, <code class="docutils literal notranslate"><span class="pre">MULE_INTERNAL</span></code>). The PostgreSQL
<code class="docutils literal notranslate"><span class="pre">SQL_ASCII</span></code> encoding has the special meaning of “no encoding”: see
<a class="reference internal" href="../basic/adapt.html#adapt-string"><span class="std std-ref">Strings adaptation</span></a> for details.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference external" href="https://www.postgresql.org/docs/current/multibyte.html">PostgreSQL supported encodings</a>.</p>
</div>
</dd></dl>
</dd></dl>
<p class="rubric">Objects involved in <a class="reference internal" href="../basic/transactions.html#transactions"><span class="std std-ref">Transaction management</span></a></p>
<dl class="py class">
<dt class="sig sig-object py" id="psycopg.IsolationLevel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">IsolationLevel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.IsolationLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Enum representing the isolation level for a transaction.</p>
<p>The value is usually used with the <a class="reference internal" href="#psycopg.Connection.isolation_level" title="psycopg.Connection.isolation_level"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.isolation_level</span></code></a> property.</p>
<p>Check the PostgreSQL documentation for a description of the effects of the
different <a class="reference external" href="https://www.postgresql.org/docs/current/transaction-iso.html">levels of transaction isolation</a>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.IsolationLevel.READ_UNCOMMITTED">
<span class="sig-name descname"><span class="pre">READ_UNCOMMITTED</span></span><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#psycopg.IsolationLevel.READ_UNCOMMITTED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.IsolationLevel.READ_COMMITTED">
<span class="sig-name descname"><span class="pre">READ_COMMITTED</span></span><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#psycopg.IsolationLevel.READ_COMMITTED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.IsolationLevel.REPEATABLE_READ">
<span class="sig-name descname"><span class="pre">REPEATABLE_READ</span></span><em class="property"> <span class="pre">=</span> <span class="pre">3</span></em><a class="headerlink" href="#psycopg.IsolationLevel.REPEATABLE_READ" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.IsolationLevel.SERIALIZABLE">
<span class="sig-name descname"><span class="pre">SERIALIZABLE</span></span><em class="property"> <span class="pre">=</span> <span class="pre">4</span></em><a class="headerlink" href="#psycopg.IsolationLevel.SERIALIZABLE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="psycopg.Transaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">Transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepoint_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rollback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Returned by <a class="reference internal" href="#psycopg.Connection.transaction" title="psycopg.Connection.transaction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.transaction()</span></code></a> to handle a transaction block.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Transaction.savepoint_name">
<span class="sig-name descname"><span class="pre">savepoint_name</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Transaction.savepoint_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the savepoint; <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> if handling the main transaction.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.Transaction.connection">
<span class="sig-name descname"><span class="pre">connection</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#psycopg.Connection" title="psycopg.Connection"><span class="pre">Connection</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.Transaction.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>The connection the object is managing.</p>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt class="sig sig-object py" id="psycopg.AsyncTransaction">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">AsyncTransaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">savepoint_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_rollback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.AsyncTransaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Returned by <a class="reference internal" href="#psycopg.AsyncConnection.transaction" title="psycopg.AsyncConnection.transaction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection.transaction()</span></code></a> to handle a transaction block.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="psycopg.AsyncTransaction.connection">
<span class="sig-name descname"><span class="pre">connection</span></span><em class="property"><span class="pre">:</span> <a class="reference internal" href="#psycopg.AsyncConnection" title="psycopg.AsyncConnection"><span class="pre">AsyncConnection</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#psycopg.AsyncTransaction.connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
<dl class="py exception">
<dt class="sig sig-object py" id="psycopg.Rollback">
<em class="property"><span class="pre">exception</span> </em><span class="sig-prename descclassname"><span class="pre">psycopg.</span></span><span class="sig-name descname"><span class="pre">Rollback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg.Rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exit the current <a class="reference internal" href="#psycopg.Transaction" title="psycopg.Transaction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Transaction</span></code></a> context immediately and rollback any changes
made within this context.</p>
<p>If a transaction context is specified in the constructor, rollback
enclosing transactions contexts up to and including the one specified.</p>
<p>It can be used as</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">Rollback</span></code>: roll back the operation that happened in the current
transaction block and continue the program after the block.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">Rollback()</span></code>: same effect as above</p></li>
<li><p><code class="samp docutils literal notranslate"><span class="pre">raise</span> <span class="pre">Rollback(</span><em><span class="pre">tx</span></em><span class="pre">)</span></code>: roll back any operation that happened in
the <a class="reference internal" href="#psycopg.Transaction" title="psycopg.Transaction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Transaction</span></code></a> <em>tx</em> (returned by a statement such as <code class="samp docutils literal notranslate"><span class="pre">with</span>
<span class="pre">conn.transaction()</span> <span class="pre">as</span> <em><span class="pre">tx</span></em><span class="pre">:</span></code> and all the blocks nested within. The
program will continue after the <em>tx</em> block.</p></li>
</ul>
</dd></dl>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="cursors.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Cursor classes</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="module.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">psycopg</span></code> module</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2020-2021, Daniele Varrazzo and The Psycopg Team |
          Created using <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../_sources/api/connections.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Connection classes</a><ul>
<li><a class="reference internal" href="#the-connection-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code> class</a></li>
<li><a class="reference internal" href="#the-asyncconnection-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection</span></code> class</a></li>
<li><a class="reference internal" href="#connection-support-objects">Connection support objects</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>
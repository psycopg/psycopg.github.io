<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="sql – SQL string composition" href="sql.html" /><link rel="prev" title="Connection classes" href="connections.html" />

    <meta name="generator" content="sphinx-3.3.1, furo 2021.04.11.beta34"/>
        <title>Cursor classes - psycopg3 UNRELEASED documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 1rem;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --admonition-font-size: 1rem;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/psycopg.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<div class="announcement">
  <aside class="announcement-content">
     <a style="text-decoration: none; color: white;"
   href="https://github.com/sponsors/dvarrazzo/">
   <img height="24px" width="24px" src="/img/logo/psycopg-48.png"/>
    Sponsor psycopg3 on GitHub
</a>
 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">psycopg3 UNRELEASED documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/psycopg.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/psycopg.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">psycopg3 UNRELEASED documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../basic/index.html">Getting started with <code class="docutils literal notranslate"><span class="pre">psycopg3</span></code></a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../basic/install.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/usage.html">Basic module usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/params.html">Passing parameters to SQL queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/adapt.html">Adaptation between Python and PostgreSQL types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic/transactions.html">Transaction management</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../advanced/index.html">Advanced topics</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced/async.html">Async operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/copy.html">Using COPY TO and COPY FROM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/cursors.html">Cursor types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/rows.html">Row factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/pool.html">Connection pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/adapt.html">Data adaptation configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/prepare.html">Prepared statements</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html"><code class="docutils literal notranslate"><span class="pre">psycopg3</span></code> API</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="connections.html">Connection classes</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Cursor classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql</span></code> – SQL string composition</a></li>
<li class="toctree-l2"><a class="reference internal" href="errors.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">errors</span></code> – package exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pool.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pool</span></code> – Connection pool implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">types</span></code> – types mapping and adaptation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pq.html"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pq</span></code> – libpq wrapper module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../from_pg2.html">Differences from <code class="docutils literal notranslate"><span class="pre">psycopg2</span></code></a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="cursor-classes">
<h1>Cursor classes<a class="headerlink" href="#cursor-classes" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code></a> and <a class="reference internal" href="#psycopg3.AsyncCursor" title="psycopg3.AsyncCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code></a> classes are the main objects to send commands
to a PostgreSQL database session. They are normally created by the
connection’s <a class="reference internal" href="connections.html#psycopg3.Connection.cursor" title="psycopg3.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cursor()</span></code></a> method.</p>
<p>Using the <em>name</em> parameter on <code class="xref py py-obj docutils literal notranslate"><span class="pre">cursor()</span></code> will create a <a class="reference internal" href="#psycopg3.ServerCursor" title="psycopg3.ServerCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ServerCursor</span></code></a> or
<a class="reference internal" href="#psycopg3.AsyncServerCursor" title="psycopg3.AsyncServerCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncServerCursor</span></code></a>, which can be used to retrieve partial results from a
database.</p>
<p>A <a class="reference internal" href="connections.html#psycopg3.Connection" title="psycopg3.Connection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection</span></code></a> can create several cursors, but only one at time can perform
operations, so they are not the best way to achieve parallelism (you may want
to operate with several connections instead). All the cursors on the same
connection have a view of the same session, so they can see each other’s
uncommitted data.</p>
<div class="section" id="the-cursor-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code> class<a class="headerlink" href="#the-cursor-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.Cursor">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">Cursor</code><span class="sig-paren">(</span><em class="sig-param">connection</em>, <em class="sig-param">*</em>, <em class="sig-param">format=&lt;Format.TEXT: 0&gt;</em>, <em class="sig-param">row_factory=&lt;function tuple_row&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>This class implements a <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/#cursor-objects">DBAPI-compliant interface</a>. It is what the
classic <a class="reference internal" href="connections.html#psycopg3.Connection.cursor" title="psycopg3.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.cursor()</span></code></a> method returns. <a class="reference internal" href="connections.html#psycopg3.AsyncConnection.cursor" title="psycopg3.AsyncConnection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection.cursor()</span></code></a>
will create instead <a class="reference internal" href="#psycopg3.AsyncCursor" title="psycopg3.AsyncCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code></a> objects, which have the same set of
method but expose an <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a> interface and require <code class="docutils literal notranslate"><span class="pre">async</span></code> and
<code class="docutils literal notranslate"><span class="pre">await</span></code> keywords to operate.</p>
<p>Cursors behave as context managers: on block exit they are closed and
further operation will not be possible. Closing a cursor will not
terminate a transaction or a session though.</p>
<dl class="py attribute">
<dt id="psycopg3.Cursor.connection">
<code class="sig-name descname">connection</code><em class="property">: <a class="reference internal" href="connections.html#psycopg3.Connection" title="psycopg3.Connection">Connection</a></em><a class="headerlink" href="#psycopg3.Cursor.connection" title="Permalink to this definition">¶</a></dt>
<dd><p>The connection this cursor is using.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the current cursor and free associated resources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>you can use <a class="reference internal" href="../basic/usage.html#usage"><span class="std std-ref">with conn.cursor(): …</span></a>
to close the cursor automatically when the block is exited.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.closed">
<code class="sig-name descname">closed</code><a class="headerlink" href="#psycopg3.Cursor.closed" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> if the cursor is closed.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>
<p class="rubric">Methods to send commands</p>
<dl class="py method">
<dt id="psycopg3.Cursor.execute">
<code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">prepare</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a query or command to the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cursor</span></code></a></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg3.sql.Composable" title="psycopg3.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The query to execute.</p></li>
<li><p><strong>params</strong> (<em>Sequence</em><em> or </em><em>Mapping</em>) – The parameters to pass to the query, if any.</p></li>
<li><p><strong>prepare</strong> – Force (<code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code>) or disallow (<code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code>) preparation of
the query. By default (<code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>) prepare automatically. See
<a class="reference internal" href="../advanced/prepare.html#prepared-statements"><span class="std std-ref">Prepared statements</span></a>.</p></li>
</ul>
</dd>
</dl>
<p>Return the cursor itself, so that it will be possible to chain a fetch
operation after the call.</p>
<p>See <a class="reference internal" href="../basic/params.html#query-parameters"><span class="std std-ref">Passing parameters to SQL queries</span></a> for all the details about executing
queries.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.executemany">
<code class="sig-name descname">executemany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params_seq</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the same command with a sequence of input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg3.sql.Composable" title="psycopg3.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The query to execute</p></li>
<li><p><strong>params_seq</strong> (<em>Sequence of Sequences</em><em> or </em><em>Mappings</em>) – The parameters to pass to the query</p></li>
</ul>
</dd>
</dl>
<p>This is more efficient than performing separate queries, but in case of
several <code class="sql docutils literal notranslate"><span class="pre">INSERT</span></code> (and with some SQL creativity for massive
<code class="sql docutils literal notranslate"><span class="pre">UPDATE</span></code> too) you may consider using <a class="reference internal" href="#psycopg3.Cursor.copy" title="psycopg3.Cursor.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy()</span></code></a>.</p>
<p>See <a class="reference internal" href="../basic/params.html#query-parameters"><span class="std std-ref">Passing parameters to SQL queries</span></a> for all the details about executing
queries.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">statement</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Initiate a <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code> operation and return an object to manage it.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg3.Copy" title="psycopg3.Copy">Copy</a></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>statement</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg3.sql.Composable" title="psycopg3.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The copy operation to execute</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>it must be called as <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">cur.copy()</span> <span class="pre">as</span> <span class="pre">copy:</span> <span class="pre">...</span></code></p>
</div>
<p>See <a class="reference internal" href="../advanced/copy.html#copy"><span class="std std-ref">Using COPY TO and COPY FROM</span></a> for information about <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.stream">
<code class="sig-name descname">stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate row-by-row on a result from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[~Row]</p>
</dd>
</dl>
<p>This command is similar to execute + iter; however it supports endless
data streams. The feature is not available in PostgreSQL, but some
implementations exist: Materialize <a class="reference external" href="https://materialize.com/docs/sql/tail/#main">TAIL</a> and CockroachDB
<a class="reference external" href="https://www.cockroachlabs.com/docs/stable/changefeed-for.html">CHANGEFEED</a> for instance.</p>
<p>The feature, and the API supporting it, are still experimental.
Beware… 👀</p>
<p>The parameters are the same of <a class="reference internal" href="#psycopg3.Cursor.execute" title="psycopg3.Cursor.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.format">
<code class="sig-name descname">format</code><a class="headerlink" href="#psycopg3.Cursor.format" title="Permalink to this definition">¶</a></dt>
<dd><p>The format of the data returned by the queries. It can be selected
initially e.g. specifying <a class="reference internal" href="connections.html#psycopg3.Connection.cursor" title="psycopg3.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.cursor</span></code></a><code class="docutils literal notranslate"><span class="pre">(binary=True)</span></code> and
changed during the cursor’s lifetime.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="pq.html#psycopg3.pq.Format" title="psycopg3.pq.Format">pq.Format</a></p>
</dd>
</dl>
<div class="admonition-todo admonition">
<p class="admonition-title">TODO</p>
<p>Add <a class="reference internal" href="#psycopg3.Cursor.execute" title="psycopg3.Cursor.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute</span></code></a><code class="docutils literal notranslate"><span class="pre">(binary=True)</span></code> too?</p>
</div>
</dd></dl>
<p class="rubric">Methods to retrieve results</p>
<p>Fetch methods are only available if the last operation produced results,
e.g. a <code class="sql docutils literal notranslate"><span class="pre">SELECT</span></code> or a command with <code class="sql docutils literal notranslate"><span class="pre">RETURNING</span></code>. They will raise
an exception if used with operations that don’t return result, such as an
<code class="sql docutils literal notranslate"><span class="pre">INSERT</span></code> with no <code class="sql docutils literal notranslate"><span class="pre">RETURNING</span></code> or an <code class="sql docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>cursors are iterable objects, so just using <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">record</span> <span class="pre">in</span>
<span class="pre">cursor</span></code> syntax will iterate on the records in the current recordset.</p>
</div>
<dl class="py method">
<dt id="psycopg3.Cursor.row_factory">
<em class="property">property </em><code class="sig-name descname">row_factory</code><a class="headerlink" href="#psycopg3.Cursor.row_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Writable attribute to control how result rows are formed.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">RowFactory</span></code></p>
</dd>
</dl>
<p>The property affects the objects returned by the <a class="reference internal" href="#psycopg3.Cursor.fetchone" title="psycopg3.Cursor.fetchone"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetchone()</span></code></a>,
<a class="reference internal" href="#psycopg3.Cursor.fetchmany" title="psycopg3.Cursor.fetchmany"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetchmany()</span></code></a>, <a class="reference internal" href="#psycopg3.Cursor.fetchall" title="psycopg3.Cursor.fetchall"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fetchall()</span></code></a> methods. The default
(<a class="reference internal" href="../advanced/rows.html#psycopg3.rows.tuple_row" title="psycopg3.rows.tuple_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple_row</span></code></a>) returns a tuple for each record fetched.</p>
<p>See <a class="reference internal" href="../advanced/rows.html#row-factories"><span class="std std-ref">Row factories</span></a> for details.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.fetchone">
<code class="sig-name descname">fetchone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next record from the current recordset.</p>
<p>Return <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> the recordset is finished.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Row], with Row defined by <a class="reference internal" href="#psycopg3.Cursor.row_factory" title="psycopg3.Cursor.row_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">row_factory</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.fetchmany">
<code class="sig-name descname">fetchmany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next <em>size</em> records from the current recordset.</p>
<p><em>size</em> default to <code class="xref py py-obj docutils literal notranslate"><span class="pre">self.arraysize</span></code> if not specified.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Sequence[Row], with Row defined by <a class="reference internal" href="#psycopg3.Cursor.row_factory" title="psycopg3.Cursor.row_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">row_factory</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.fetchall">
<code class="sig-name descname">fetchall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all the remaining records from the current recordset.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Sequence[Row], with Row defined by <a class="reference internal" href="#psycopg3.Cursor.row_factory" title="psycopg3.Cursor.row_factory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">row_factory</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.nextset">
<code class="sig-name descname">nextset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.nextset" title="Permalink to this definition">¶</a></dt>
<dd><p>Move to the next result set if <a class="reference internal" href="#psycopg3.Cursor.execute" title="psycopg3.Cursor.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code></a> returned more than one.</p>
<p>Return <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> if a new result is available, which will be the one
methods <code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch*()</span></code> will operate on.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Cursor.scroll">
<code class="sig-name descname">scroll</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'relative'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Cursor.scroll" title="Permalink to this definition">¶</a></dt>
<dd><p>Move the cursor in the result set to a new position according to mode.</p>
<p>If <em>mode</em> is <code class="docutils literal notranslate"><span class="pre">relative</span></code> (default), value is taken as offset to the
current position in the result set, if set to <code class="docutils literal notranslate"><span class="pre">absolute</span></code>, <em>value</em>
states an absolute target position.</p>
<p>Raise <code class="xref py py-obj docutils literal notranslate"><span class="pre">IndexError</span></code> in case a scroll operation would leave the result
set. In this case the position will not change.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.pgresult">
<code class="sig-name descname">pgresult</code><em class="property">: Optional<span class="p">[</span><a class="reference internal" href="pq.html#psycopg3.pq.PGresult" title="psycopg3.pq.PGresult">psycopg3.pq.PGresult</a><span class="p">]</span></em><a class="headerlink" href="#psycopg3.Cursor.pgresult" title="Permalink to this definition">¶</a></dt>
<dd><p>The result returned by the last query and currently exposed by the
cursor, if available, else <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>
<p class="rubric">Information about the data</p>
<dl class="py attribute">
<dt id="psycopg3.Cursor.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#psycopg3.Cursor.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#psycopg3.Column" title="psycopg3.Column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Column</span></code></a> objects describing the current resultset.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> if the current resultset didn’t return tuples.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference internal" href="#psycopg3.Column" title="psycopg3.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>]]</p>
</dd>
</dl>
<p>A list of objects describing each column of the current queryset.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> if the last operation didn’t return a queryset.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.rowcount">
<code class="sig-name descname">rowcount</code><a class="headerlink" href="#psycopg3.Cursor.rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of records affected by the precedent operation.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.rownumber">
<code class="sig-name descname">rownumber</code><a class="headerlink" href="#psycopg3.Cursor.rownumber" title="Permalink to this definition">¶</a></dt>
<dd><p>Index of the next row to fetch in the current result.</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> if there is no result to fetch.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.query">
<code class="sig-name descname">query</code><a class="headerlink" href="#psycopg3.Cursor.query" title="Permalink to this definition">¶</a></dt>
<dd><p>The last query sent to the server, if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>]</p>
</dd>
</dl>
<p>The query will be in PostgreSQL format (with <code class="docutils literal notranslate"><span class="pre">$1</span></code>, <code class="docutils literal notranslate"><span class="pre">$2</span></code>…
parameters), the parameters will <em>not</em> be merged to the query: see
<a class="reference internal" href="#psycopg3.Cursor.params" title="psycopg3.Cursor.params"><code class="xref py py-obj docutils literal notranslate"><span class="pre">params</span></code></a>.</p>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.Cursor.params">
<code class="sig-name descname">params</code><a class="headerlink" href="#psycopg3.Cursor.params" title="Permalink to this definition">¶</a></dt>
<dd><p>The last set of parameters sent to the server, if available.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>]]]</p>
</dd>
</dl>
<p>The parameters are adapted to PostgreSQL format.</p>
</dd></dl>
</dd></dl>
</div>
<div class="section" id="the-servercursor-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">ServerCursor</span></code> class<a class="headerlink" href="#the-servercursor-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.ServerCursor">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">ServerCursor</code><span class="sig-paren">(</span><em class="sig-param">connection</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">format=&lt;Format.TEXT: 0&gt;</em>, <em class="sig-param">row_factory=&lt;function tuple_row&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor" title="Permalink to this definition">¶</a></dt>
<dd><p>This class also implements a <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/#cursor-objects">DBAPI-compliant interface</a>. It is created
by <a class="reference internal" href="connections.html#psycopg3.Connection.cursor" title="psycopg3.Connection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Connection.cursor()</span></code></a> specifying the <em>name</em> parameter. Using this
object results in the creation of an equivalent PostgreSQL cursor in the
server. DBAPI-extension methods (such as <a class="reference internal" href="#psycopg3.Cursor.copy" title="psycopg3.Cursor.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy()</span></code></a> or
<a class="reference internal" href="#psycopg3.Cursor.stream" title="psycopg3.Cursor.stream"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stream()</span></code></a>) are not implemented on this object: use a normal
<a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code></a> instead.</p>
<p>Most attribute and methods behave exactly like in <a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code></a>, here are
documented the differences:</p>
<dl class="py attribute">
<dt id="psycopg3.ServerCursor.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#psycopg3.ServerCursor.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the cursor.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.ServerCursor.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the current cursor and free associated resources.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Closing a server-side cursor is more important than
closing a client-side one because it also releases the resources
on the server, which otherwise might remain allocated until the
end of the session (memory, locks). Using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">with</span> <span class="pre">conn.cursor():</span>
<span class="pre">...</span></code> pattern is especially useful so that the cursor is closed at
the end of the block.</p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.ServerCursor.execute">
<code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">scrollable</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hold</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a cursor to execute a query to the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg3.ServerCursor" title="psycopg3.ServerCursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">ServerCursor</span></code></a></p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>query</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>, or <a class="reference internal" href="sql.html#psycopg3.sql.Composable" title="psycopg3.sql.Composable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql.Composable</span></code></a>) – The query to execute.</p></li>
<li><p><strong>params</strong> (<em>Sequence</em><em> or </em><em>Mapping</em>) – The parameters to pass to the query, if any.</p></li>
<li><p><strong>scrollable</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Optional[bool]</span></code>) – if <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> make the cursor scrollable, if <code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code>
not. if <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> leave the choice to the server.</p></li>
<li><p><strong>hold</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>) – if <code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code> allow the cursor to be used after the
transaction creating it has committed.</p></li>
</ul>
</dd>
</dl>
<p>Create a server cursor with given <a class="reference internal" href="#psycopg3.ServerCursor.name" title="psycopg3.ServerCursor.name"><code class="xref py py-obj docutils literal notranslate"><span class="pre">name</span></code></a> and the <em>query</em> in argument.
If using <code class="sql docutils literal notranslate"><span class="pre">DECLARE</span></code> is not appropriate you can avoid to use
<code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code>, crete the cursor in other ways, and use directly the
<code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch*()</span></code> methods instead. See <a class="reference internal" href="../advanced/cursors.html#cursor-steal"><span class="std std-ref">“Stealing” an existing cursor</span></a> for an example.</p>
<p>Using <code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code> more than once will close the previous cursor and
open a new one with the same name.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The PostgreSQL <a class="reference external" href="https://www.postgresql.org/docs/current/sql-declare.html">DECLARE</a> statement documetation describe
in details all the parameters.</p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.ServerCursor.executemany">
<code class="sig-name descname">executemany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params_seq</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>Method not implemented for server-side cursors.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.ServerCursor.fetchone">
<code class="sig-name descname">fetchone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.ServerCursor.fetchmany">
<code class="sig-name descname">fetchmany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.ServerCursor.fetchall">
<code class="sig-name descname">fetchall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[~Row]</p>
</dd>
</dl>
<p>These methods use the <a class="reference external" href="https://www.postgresql.org/docs/current/sql-fetch.html">FETCH</a> SQL statement to retrieve some of the
records from the cursor’s current position.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also iterate on the cursor to read its result one at
time with <code class="xref py py-obj docutils literal notranslate"><span class="pre">for</span> <span class="pre">record</span> <span class="pre">in</span> <span class="pre">cur:</span> <span class="pre">...</span></code>. In this case, the records are
not fetched one at time from the server but they are retrieved in
batches of <a class="reference internal" href="#psycopg3.ServerCursor.itersize" title="psycopg3.ServerCursor.itersize"><code class="xref py py-obj docutils literal notranslate"><span class="pre">itersize</span></code></a> to reduce the number of server roundtrips.</p>
</div>
</dd></dl>
<dl class="py attribute">
<dt id="psycopg3.ServerCursor.itersize">
<code class="sig-name descname">itersize</code><em class="property">: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a></em><a class="headerlink" href="#psycopg3.ServerCursor.itersize" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of records to fetch at time when iterating on the cursor. The
default is 100.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.ServerCursor.scroll">
<code class="sig-name descname">scroll</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'relative'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.ServerCursor.scroll" title="Permalink to this definition">¶</a></dt>
<dd><p>This method uses the <a class="reference external" href="https://www.postgresql.org/docs/current/sql-fetch.html">MOVE</a> SQL statement to move the current position
in the server-side cursor, which will affect following <code class="xref py py-obj docutils literal notranslate"><span class="pre">fetch*()</span></code>
operations. If you need to scroll backwards you should probably
use <code class="xref py py-obj docutils literal notranslate"><span class="pre">scrollable=True</span></code> in <a class="reference internal" href="#psycopg3.ServerCursor.execute" title="psycopg3.ServerCursor.execute"><code class="xref py py-obj docutils literal notranslate"><span class="pre">execute()</span></code></a>.</p>
<p>Note that PostgreSQL doesn’t provide a reliable way to report when a
cursor moves out of bound, so the method might not raise <code class="xref py py-obj docutils literal notranslate"><span class="pre">IndexError</span></code>
when it happens, but it might rather stop at the cursor boundary.</p>
</dd></dl>
</dd></dl>
</div>
<div class="section" id="the-asynccursor-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code> class<a class="headerlink" href="#the-asynccursor-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.AsyncCursor">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">AsyncCursor</code><span class="sig-paren">(</span><em class="sig-param">connection</em>, <em class="sig-param">*</em>, <em class="sig-param">format=&lt;Format.TEXT: 0&gt;</em>, <em class="sig-param">row_factory=&lt;function tuple_row&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor" title="Permalink to this definition">¶</a></dt>
<dd><p>This class implements a DBAPI-inspired interface, with all the blocking
methods implemented as coroutines. Unless specified otherwise,
non-blocking methods are shared with the <a class="reference internal" href="#psycopg3.Cursor" title="psycopg3.Cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code></a> class.</p>
<p>The following methods have the same behaviour of the matching <code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code>
methods, but should be called using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">await</span></code> keyword.</p>
<dl class="py attribute">
<dt id="psycopg3.AsyncCursor.connection">
<code class="sig-name descname">connection</code><em class="property">: <a class="reference internal" href="connections.html#psycopg3.AsyncConnection" title="psycopg3.AsyncConnection">AsyncConnection</a></em><a class="headerlink" href="#psycopg3.AsyncCursor.connection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.close">
<em class="property">async </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">conn.cursor():</span> <span class="pre">...</span></code> to close the
cursor automatically when the block is exited.</p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.execute">
<em class="property">async </em><code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">prepare</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.execute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg3.AsyncCursor" title="psycopg3.AsyncCursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncCursor</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.executemany">
<em class="property">async </em><code class="sig-name descname">executemany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params_seq</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.executemany" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">statement</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.copy" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg3.AsyncCopy" title="psycopg3.AsyncCopy">AsyncCopy</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It must be called as <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span> <span class="pre">cur.copy()</span> <span class="pre">as</span> <span class="pre">copy:</span> <span class="pre">...</span></code></p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.stream">
<code class="sig-name descname">stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.stream" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AsyncIterator" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIterator</span></code></a>[~Row]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It must be called as <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">record</span> <span class="pre">in</span> <span class="pre">cur.stream(query):</span>
<span class="pre">...</span></code></p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.fetchone">
<em class="property">async </em><code class="sig-name descname">fetchone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.fetchmany">
<em class="property">async </em><code class="sig-name descname">fetchmany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.fetchall">
<em class="property">async </em><code class="sig-name descname">fetchall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCursor.scroll">
<em class="property">async </em><code class="sig-name descname">scroll</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'relative'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCursor.scroll" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">record</span> <span class="pre">in</span> <span class="pre">cursor:</span> <span class="pre">...</span></code> to iterate
on the async cursor results.</p>
</div>
</dd></dl>
</div>
<div class="section" id="the-asyncservercursor-class">
<h2>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncServerCursor</span></code> class<a class="headerlink" href="#the-asyncservercursor-class" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.AsyncServerCursor">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">AsyncServerCursor</code><span class="sig-paren">(</span><em class="sig-param">connection</em>, <em class="sig-param">name</em>, <em class="sig-param">*</em>, <em class="sig-param">format=&lt;Format.TEXT: 0&gt;</em>, <em class="sig-param">row_factory=&lt;function tuple_row&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor" title="Permalink to this definition">¶</a></dt>
<dd><p>This class implements a DBAPI-inspired interface as the <a class="reference internal" href="#psycopg3.AsyncCursor" title="psycopg3.AsyncCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code></a>
does, but wraps a server-side cursor like the <a class="reference internal" href="#psycopg3.ServerCursor" title="psycopg3.ServerCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ServerCursor</span></code></a> class. It is
created by <a class="reference internal" href="connections.html#psycopg3.AsyncConnection.cursor" title="psycopg3.AsyncConnection.cursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncConnection.cursor()</span></code></a> specifying the <em>name</em> parameter.</p>
<p>The following are the methods exposing a different (async) interface from
the <a class="reference internal" href="#psycopg3.ServerCursor" title="psycopg3.ServerCursor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ServerCursor</span></code></a> counterpart, but sharing the same semantics.</p>
<dl class="py method">
<dt id="psycopg3.AsyncServerCursor.close">
<em class="property">async </em><code class="sig-name descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor.close" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can close the cursor automatically using <code class="samp docutils literal notranslate"><span class="pre">async</span>
<span class="pre">with</span> <span class="pre">conn.cursor(</span><em><span class="pre">name</span></em><span class="pre">):</span> <span class="pre">...</span></code></p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncServerCursor.execute">
<em class="property">async </em><code class="sig-name descname">execute</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">scrollable</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">hold</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor.execute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#psycopg3.AsyncServerCursor" title="psycopg3.AsyncServerCursor"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncServerCursor</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncServerCursor.executemany">
<em class="property">async </em><code class="sig-name descname">executemany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">query</span></em>, <em class="sig-param"><span class="n">params_seq</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor.executemany" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncServerCursor.fetchone">
<em class="property">async </em><code class="sig-name descname">fetchone</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncServerCursor.fetchmany">
<em class="property">async </em><code class="sig-name descname">fetchmany</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[~Row]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncServerCursor.fetchall">
<em class="property">async </em><code class="sig-name descname">fetchall</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[~Row]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also iterate on the cursor using <code class="xref py py-obj docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">record</span>
<span class="pre">in</span> <span class="pre">cur:</span> <span class="pre">...</span></code>.</p>
</div>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncServerCursor.scroll">
<em class="property">async </em><code class="sig-name descname">scroll</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'relative'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncServerCursor.scroll" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
</dd></dl>
</div>
<div class="section" id="the-description-column-object">
<h2>The description <a class="reference internal" href="#psycopg3.Column" title="psycopg3.Column"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Column</span></code></a> object<a class="headerlink" href="#the-description-column-object" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.Column">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">Column</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cursor</span></em>, <em class="sig-param"><span class="n">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Column" title="Permalink to this definition">¶</a></dt>
<dd><p>An object describing a column of data from a database result, <a class="reference external" href="https://www.python.org/dev/peps/pep-0249/#description">as described
by the DBAPI</a>, so it can also be unpacked as a 7-items tuple.</p>
<p>The object is returned by <a class="reference internal" href="#psycopg3.Cursor.description" title="psycopg3.Cursor.description"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor.description</span></code></a>.</p>
<dl class="py method">
<dt id="psycopg3.Column.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#psycopg3.Column.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the column.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.type_code">
<em class="property">property </em><code class="sig-name descname">type_code</code><a class="headerlink" href="#psycopg3.Column.type_code" title="Permalink to this definition">¶</a></dt>
<dd><p>The numeric OID of the column.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.display_size">
<em class="property">property </em><code class="sig-name descname">display_size</code><a class="headerlink" href="#psycopg3.Column.display_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The field size, for <code class="sql docutils literal notranslate"><span class="pre">varchar(n)</span></code>, None otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.internal_size">
<em class="property">property </em><code class="sig-name descname">internal_size</code><a class="headerlink" href="#psycopg3.Column.internal_size" title="Permalink to this definition">¶</a></dt>
<dd><p>The interal field size for fixed-size types, None otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.precision">
<em class="property">property </em><code class="sig-name descname">precision</code><a class="headerlink" href="#psycopg3.Column.precision" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of digits for fixed precision types.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Column.scale">
<em class="property">property </em><code class="sig-name descname">scale</code><a class="headerlink" href="#psycopg3.Column.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of digits after the decimal point if available.</p>
<p>TODO: probably better than precision for datetime objects? review.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</div>
<div class="section" id="copy-related-objects">
<h2>COPY-related objects<a class="headerlink" href="#copy-related-objects" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="psycopg3.Copy">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">Copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cursor</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage a <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code> operation.</p>
<p>The object is normally returned by <code class="docutils literal notranslate"><span class="pre">with</span></code> <a class="reference internal" href="#psycopg3.Cursor.copy" title="psycopg3.Cursor.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor.copy()</span></code></a>.</p>
<p>See <a class="reference internal" href="../advanced/copy.html#copy"><span class="std std-ref">Using COPY TO and COPY FROM</span></a> for details.</p>
<dl class="py method">
<dt id="psycopg3.Copy.write_row">
<code class="sig-name descname">write_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">row</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.write_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a record to a table after a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">FROM</span></code> operation.</p>
<p>The data in the tuple will be converted as configured on the cursor;
see <a class="reference internal" href="../advanced/adapt.html#adaptation"><span class="std std-ref">Data adaptation configuration</span></a> for details.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Copy.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a block of data to a table after a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">FROM</span></code> operation.</p>
<p>If the <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code> is in binary format <em>buffer</em> must be <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code>. In
text mode it can be either <code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Copy.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read an unparsed row after a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">TO</span></code> operation.</p>
<p>Return an empty string when the data is finished.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a></p>
</dd>
</dl>
<p>Instead of using <code class="xref py py-obj docutils literal notranslate"><span class="pre">read()</span></code> you can iterate on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Copy</span></code> object to
read its data row by row, using <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">row</span> <span class="pre">in</span> <span class="pre">copy:</span> <span class="pre">...</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Copy.rows">
<code class="sig-name descname">rows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate on the result of a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">TO</span></code> operation record by record.</p>
<p>Note that the records returned will be tuples of unparsed strings or
bytes, unless data types are specified using <a class="reference internal" href="#psycopg3.Copy.set_types" title="psycopg3.Copy.set_types"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_types()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterator" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Iterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>, …]]</p>
</dd>
</dl>
<p>Equivalent of iterating on <a class="reference internal" href="#psycopg3.Copy.read_row" title="psycopg3.Copy.read_row"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_row()</span></code></a> until it returns <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Copy.read_row">
<code class="sig-name descname">read_row</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.read_row" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a parsed row of data from a table after a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">TO</span></code> operation.</p>
<p>Return <code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code> when the data is finished.</p>
<p>Note that the records returned will be tuples of unparsed strings or
bytes, unless data types are specified using <a class="reference internal" href="#psycopg3.Copy.set_types" title="psycopg3.Copy.set_types"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_types()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>, …]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.Copy.set_types">
<code class="sig-name descname">set_types</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">types</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.Copy.set_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the types expected out of a <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">TO</span></code> operation.</p>
<p>Without setting the types, the data from <code class="sql docutils literal notranslate"><span class="pre">COPY</span> <span class="pre">TO</span></code> will be
returned as unparsed strings or bytes.</p>
<p>The types must be specified as a sequence of oid or PostgreSQL type
names (e.g. <code class="docutils literal notranslate"><span class="pre">int4</span></code>, <code class="docutils literal notranslate"><span class="pre">timestamptz[]</span></code>).</p>
<div class="admonition-todo admonition">
<p class="admonition-title">TODO</p>
<p>Only builtin names are supprted for the moment. In order to specify
custom data types you must use their oid.</p>
</div>
</dd></dl>
</dd></dl>
<dl class="py class">
<dt id="psycopg3.AsyncCopy">
<em class="property">class </em><code class="sig-prename descclassname">psycopg3.</code><code class="sig-name descname">AsyncCopy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cursor</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy" title="Permalink to this definition">¶</a></dt>
<dd><p>Manage an asynchronous <code class="sql docutils literal notranslate"><span class="pre">COPY</span></code> operation.</p>
<p>The object is normally returned by <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> <a class="reference internal" href="#psycopg3.AsyncCursor.copy" title="psycopg3.AsyncCursor.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor.copy()</span></code></a>.
Its methods are similar to the ones of the <a class="reference internal" href="#psycopg3.Copy" title="psycopg3.Copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Copy</span></code></a> object but offering an
<a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a> interface (<code class="xref py py-obj docutils literal notranslate"><span class="pre">await</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code>).</p>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.write_row">
<em class="property">async </em><code class="sig-name descname">write_row</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">row</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy.write_row" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.write">
<em class="property">async </em><code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">buffer</span></em><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.read">
<em class="property">async </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy.read" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#memoryview" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a></p>
</dd>
</dl>
<p>Instead of using <code class="xref py py-obj docutils literal notranslate"><span class="pre">read()</span></code> you can iterate on the <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCopy</span></code> object
to read its data row by row, using <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">row</span> <span class="pre">in</span> <span class="pre">copy:</span> <span class="pre">...</span></code>.</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.rows">
<code class="sig-name descname">rows</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy.rows" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.AsyncIterator" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIterator</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>, …]]</p>
</dd>
</dl>
<p>Use it as <code class="xref py py-obj docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span> <span class="pre">record</span> <span class="pre">in</span> <span class="pre">copy.rows():</span></code> …</p>
</dd></dl>
<dl class="py method">
<dt id="psycopg3.AsyncCopy.read_row">
<em class="property">async </em><code class="sig-name descname">read_row</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#psycopg3.AsyncCopy.read_row" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Optional</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.9)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Any</span></code></a>, …]]</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="sql.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sql</span></code> – SQL string composition</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="connections.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Connection classes</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2020-2021, Daniele Varrazzo and The Psycopg Team
            |
            <a class="muted-link" href="../_sources/api/cursors.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Cursor classes</a><ul>
<li><a class="reference internal" href="#the-cursor-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">Cursor</span></code> class</a></li>
<li><a class="reference internal" href="#the-servercursor-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">ServerCursor</span></code> class</a></li>
<li><a class="reference internal" href="#the-asynccursor-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncCursor</span></code> class</a></li>
<li><a class="reference internal" href="#the-asyncservercursor-class">The <code class="xref py py-obj docutils literal notranslate"><span class="pre">AsyncServerCursor</span></code> class</a></li>
<li><a class="reference internal" href="#the-description-column-object">The description <code class="xref py py-obj docutils literal notranslate"><span class="pre">Column</span></code> object</a></li>
<li><a class="reference internal" href="#copy-related-objects">COPY-related objects</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>